(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d9b0fd6"],{1148:function(e,t,a){"use strict";var n=a("a691"),o=a("1d80");e.exports="".repeat||function(e){var t=String(o(this)),a="",i=n(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(a+=t);return a}},"13d5":function(e,t,a){"use strict";var n=a("23e7"),o=a("d58f").left,i=a("a640"),r=a("2d00"),l=a("605d"),c=i("reduce"),u=!l&&r>79&&r<83;n({target:"Array",proto:!0,forced:!c||u},{reduce:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"2fd3":function(e,t,a){"use strict";a("d2c1")},"408a":function(e,t,a){var n=a("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=n(e))throw TypeError("Incorrect invocation");return+e}},4698:function(e,t,a){"use strict";a.r(t);var n=a("7a23"),o=Object(n["withScopeId"])("data-v-18062abd");Object(n["pushScopeId"])("data-v-18062abd");var i={class:"card-header"},r=Object(n["createVNode"])("span",null,"对比维度选择",-1),l=Object(n["createTextVNode"])("查询"),c=Object(n["createTextVNode"])("重置"),u=Object(n["createTextVNode"])("导出"),d=Object(n["createTextVNode"])("参照区域:"),s=Object(n["createTextVNode"])("时间:"),m={class:"block",style:{width:"100%"}},h=Object(n["createTextVNode"])("对比区域:"),g=Object(n["createTextVNode"])("时间:"),f={class:"block",style:{width:"100%"}},v=Object(n["createTextVNode"])("指标："),p=Object(n["createVNode"])("span",null,"流量对比",-1),b=Object(n["createVNode"])("span",{style:{"line-height":"40px"}},"间隔选择",-1),N={ref:"myEchart1",style:{height:"390px",width:"100%"}},x=Object(n["createVNode"])("div",{class:"card-header"},[Object(n["createVNode"])("span",null,"参考区域")],-1),A=Object(n["createVNode"])("div",{class:"card-header"},[Object(n["createVNode"])("span",null,"对比区域")],-1);Object(n["popScopeId"])();var w=o((function(e,t,a,w,O,j){var k=Object(n["resolveComponent"])("crumbs"),V=Object(n["resolveComponent"])("el-button"),B=Object(n["resolveComponent"])("export-excel"),y=Object(n["resolveComponent"])("el-button-group"),D=Object(n["resolveComponent"])("el-col"),Y=Object(n["resolveComponent"])("market"),C=Object(n["resolveComponent"])("area-select"),_=Object(n["resolveComponent"])("el-row"),M=Object(n["resolveComponent"])("el-radio-button"),F=Object(n["resolveComponent"])("el-radio-group"),R=Object(n["resolveComponent"])("el-date-picker"),W=Object(n["resolveComponent"])("el-card"),$=Object(n["resolveComponent"])("el-option"),S=Object(n["resolveComponent"])("el-select"),P=Object(n["resolveComponent"])("small-tag");return Object(n["openBlock"])(),Object(n["createBlock"])("div",null,[Object(n["createVNode"])(k,{menu:"商场流量",subMenu:"流量对比"}),Object(n["createVNode"])(W,{shadow:"hover"},{header:o((function(){return[Object(n["createVNode"])("div",i,[r,Object(n["createVNode"])(y,null,{default:o((function(){return[Object(n["createVNode"])(V,{type:"primary",icon:"el-icon-search",onClick:j.onQuery},{default:o((function(){return[l]})),_:1},8,["onClick"]),Object(n["createVNode"])(V,{type:"primary",icon:"el-icon-refresh-right",onClick:j.reSet},{default:o((function(){return[c]})),_:1},8,["onClick"]),Object(n["createVNode"])(B,{"file-name":"数据",header:["日期","客流","集客力","提袋率","逛游深度","商场名称","区域"],"filter-filed":["date","flow","getPower","rate","deep","marketName","areaName"],data:O.dataAll},{default:o((function(){return[u]})),_:1},8,["data"])]})),_:1})])]})),default:o((function(){return[Object(n["createVNode"])(_,null,{default:o((function(){return[Object(n["createVNode"])(D,{span:2,class:"flexCenter fontSet"},{default:o((function(){return[d]})),_:1}),Object(n["createVNode"])(D,{span:10},{default:o((function(){return[Object(n["createVNode"])(_,null,{default:o((function(){return[Object(n["createVNode"])(D,{span:12},{default:o((function(){return[Object(n["createVNode"])(Y,{onMarketGet:j.marketGetA,marketSet:O.marketNameA},null,8,["onMarketGet","marketSet"])]})),_:1}),Object(n["createVNode"])(D,{span:12},{default:o((function(){return[Object(n["createVNode"])(C,{onAreaGet:j.areaGetA,areaName:e.areaName,areaSet:O.areaNameA},null,8,["onAreaGet","areaName","areaSet"])]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(D,{span:2,class:"flexCenter borderSet fontSet"},{default:o((function(){return[s]})),_:1}),Object(n["createVNode"])(D,{span:10},{default:o((function(){return[Object(n["createVNode"])(_,null,{default:o((function(){return[Object(n["createVNode"])(D,{span:14},{default:o((function(){return[Object(n["createVNode"])("div",null,[Object(n["createVNode"])(F,{modelValue:O.timeA,"onUpdate:modelValue":t[1]||(t[1]=function(e){return O.timeA=e})},{default:o((function(){return[Object(n["createVNode"])(M,{label:"近7日"}),Object(n["createVNode"])(M,{label:"近30日"}),Object(n["createVNode"])(M,{label:"近1年"}),Object(n["createVNode"])(M,{label:"自定义时间"})]})),_:1},8,["modelValue"])])]})),_:1}),Object(n["createVNode"])(D,{span:9},{default:o((function(){return[Object(n["createVNode"])("div",m,[Object(n["createVNode"])(R,{style:{width:"100%"},disabled:O.datePickerAbleA,modelValue:O.timeRangeA,"onUpdate:modelValue":t[2]||(t[2]=function(e){return O.timeRangeA=e}),type:"daterange",shortcuts:O.shortcuts,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd",align:"right"},null,8,["disabled","modelValue","shortcuts"])])]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(D,{span:4})]})),_:1}),Object(n["createVNode"])(_,{class:"marginTop10"},{default:o((function(){return[Object(n["createVNode"])(D,{span:2,class:"flexCenter fontSet"},{default:o((function(){return[h]})),_:1}),Object(n["createVNode"])(D,{span:10},{default:o((function(){return[Object(n["createVNode"])(_,null,{default:o((function(){return[Object(n["createVNode"])(D,{span:12},{default:o((function(){return[Object(n["createVNode"])(Y,{onMarketGet:j.marketGetB,marketSet:O.marketNameB},null,8,["onMarketGet","marketSet"])]})),_:1}),Object(n["createVNode"])(D,{span:12},{default:o((function(){return[Object(n["createVNode"])(C,{onAreaGet:j.areaGetB,areaSet:O.areaNameB},null,8,["onAreaGet","areaSet"])]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(D,{span:2,class:"flexCenter borderSet fontSet"},{default:o((function(){return[g]})),_:1}),Object(n["createVNode"])(D,{span:10},{default:o((function(){return[Object(n["createVNode"])(_,null,{default:o((function(){return[Object(n["createVNode"])(D,{span:14},{default:o((function(){return[Object(n["createVNode"])("div",null,[Object(n["createVNode"])(F,{modelValue:O.timeB,"onUpdate:modelValue":t[3]||(t[3]=function(e){return O.timeB=e})},{default:o((function(){return[Object(n["createVNode"])(M,{label:"近7日"}),Object(n["createVNode"])(M,{label:"近30日"}),Object(n["createVNode"])(M,{label:"近1年"}),Object(n["createVNode"])(M,{label:"自定义时间"})]})),_:1},8,["modelValue"])])]})),_:1}),Object(n["createVNode"])(D,{span:9},{default:o((function(){return[Object(n["createVNode"])("div",f,[Object(n["createVNode"])(R,{style:{width:"100%"},disabled:O.datePickerAbleB,modelValue:O.timeRangeB,"onUpdate:modelValue":t[4]||(t[4]=function(e){return O.timeRangeB=e}),type:"daterange",shortcuts:O.shortcuts,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},null,8,["disabled","modelValue","shortcuts"])])]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(D,{span:4})]})),_:1})]})),_:1}),Object(n["createVNode"])(_,null,{default:o((function(){return[Object(n["createVNode"])(D,{span:8},{default:o((function(){return[Object(n["createVNode"])(W,{class:"marginTop10",shadow:"hover"},{default:o((function(){return[Object(n["createVNode"])(_,null,{default:o((function(){return[Object(n["createVNode"])(D,{class:"flexCenter fontSet",span:4},{default:o((function(){return[v]})),_:1}),Object(n["createVNode"])(D,{span:20},{default:o((function(){return[Object(n["createVNode"])(F,{modelValue:O.indexName,"onUpdate:modelValue":t[5]||(t[5]=function(e){return O.indexName=e})},{default:o((function(){return[Object(n["createVNode"])(M,{label:"客流量"}),Object(n["createVNode"])(M,{label:"集客力"}),Object(n["createVNode"])(M,{label:"提袋率"}),Object(n["createVNode"])(M,{label:"游逛深度"})]})),_:1},8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(W,{header:"流量对比",style:{"font-weight":"bold","margin-top":"10px"}},{header:o((function(){return[Object(n["createVNode"])(_,null,{default:o((function(){return[Object(n["createVNode"])(D,{span:10,style:{"line-height":"40px"}},{default:o((function(){return[p]})),_:1}),Object(n["createVNode"])(D,{span:14},{default:o((function(){return[Object(n["createVNode"])(D,{span:12},{default:o((function(){return[b]})),_:1}),Object(n["createVNode"])(D,{span:10,offset:1},{default:o((function(){return[Object(n["createVNode"])(S,{modelValue:O.interval,"onUpdate:modelValue":t[6]||(t[6]=function(e){return O.interval=e}),clearable:"",placeholder:"请选择"},{default:o((function(){return[Object(n["createVNode"])($,{label:"一天",value:"一天"}),Object(n["createVNode"])($,{label:"一周",value:"一周"}),Object(n["createVNode"])($,{label:"一月",value:"一月"})]})),_:1},8,["modelValue"])]})),_:1})]})),_:1})]})),_:1})]})),default:o((function(){return[Object(n["createVNode"])("div",N,null,512)]})),_:1})]})),_:1}),Object(n["createVNode"])(D,{span:8},{default:o((function(){return[Object(n["createVNode"])(W,{class:"marginTop10 marginLeft10",shadow:"hover"},{header:o((function(){return[x]})),default:o((function(){return[Object(n["createVNode"])(_,null,{default:o((function(){return[Object(n["createVNode"])(D,{span:12},{default:o((function(){return[Object(n["createVNode"])(P,{options:O.tagA.all,class:"marginLeft10"},null,8,["options"])]})),_:1}),Object(n["createVNode"])(D,{span:12},{default:o((function(){return[Object(n["createVNode"])(P,{options:O.tagA.avgDay,class:"marginLeft10"},null,8,["options"])]})),_:1})]})),_:1}),Object(n["createVNode"])(_,{class:"marginTop10"},{default:o((function(){return[Object(n["createVNode"])(D,{span:12},{default:o((function(){return[Object(n["createVNode"])(P,{options:O.tagA.avgWeek,class:"marginLeft10"},null,8,["options"])]})),_:1}),Object(n["createVNode"])(D,{span:12},{default:o((function(){return[Object(n["createVNode"])(P,{options:O.tagA.avgMonth,class:"marginLeft10"},null,8,["options"])]})),_:1})]})),_:1}),Object(n["createVNode"])(_,{class:"marginTop10"},{default:o((function(){return[Object(n["createVNode"])(D,{span:12},{default:o((function(){return[Object(n["createVNode"])(P,{options:O.tagA.week,class:"marginLeft10"},null,8,["options"])]})),_:1}),Object(n["createVNode"])(D,{span:12},{default:o((function(){return[Object(n["createVNode"])(P,{options:O.tagA.upDown,class:"marginLeft10"},null,8,["options"])]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(D,{span:8},{default:o((function(){return[Object(n["createVNode"])(W,{class:"marginTop10 marginLeft10",shadow:"hover"},{header:o((function(){return[A]})),default:o((function(){return[Object(n["createVNode"])(_,null,{default:o((function(){return[Object(n["createVNode"])(D,{span:12},{default:o((function(){return[Object(n["createVNode"])(P,{options:O.tagB.all,class:"marginLeft10"},null,8,["options"])]})),_:1}),Object(n["createVNode"])(D,{span:12},{default:o((function(){return[Object(n["createVNode"])(P,{options:O.tagB.avgDay,class:"marginLeft10"},null,8,["options"])]})),_:1})]})),_:1}),Object(n["createVNode"])(_,{class:"marginTop10"},{default:o((function(){return[Object(n["createVNode"])(D,{span:12},{default:o((function(){return[Object(n["createVNode"])(P,{options:O.tagB.avgWeek,class:"marginLeft10"},null,8,["options"])]})),_:1}),Object(n["createVNode"])(D,{span:12},{default:o((function(){return[Object(n["createVNode"])(P,{options:O.tagB.avgMonth,class:"marginLeft10"},null,8,["options"])]})),_:1})]})),_:1}),Object(n["createVNode"])(_,{class:"marginTop10"},{default:o((function(){return[Object(n["createVNode"])(D,{span:12},{default:o((function(){return[Object(n["createVNode"])(P,{options:O.tagB.week,class:"marginLeft10"},null,8,["options"])]})),_:1}),Object(n["createVNode"])(D,{span:12},{default:o((function(){return[Object(n["createVNode"])(P,{options:O.tagB.upDown,class:"marginLeft10"},null,8,["options"])]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})])})),O=(a("4de4"),a("b680"),a("13d5"),a("00fe")),j=a("cf77"),k=a("3660"),V=a("af7e"),B=a("bc3a"),y=a.n(B),D=a("313e"),Y=a("a7c0"),C={data:function(){var e=this;return{dataAll:[],areaNameA:"全部",timeA:"近1年",areaNameB:"全部",timeB:"近1年",timeRangeA:"",timeRangeB:"",marketNameA:"万达",marketNameB:"万达",indexName:"客流量",shortcuts:[{text:"最近一周",value:function(){var t=new Date,a=new Date;return a.setTime(a.getTime()-6048e5),[e.$moment().subtract(7,"days"),t]}()},{text:"最近一月",value:function(){var t=new Date,a=new Date;return a.setTime(a.getTime()-2592e6),[e.$moment().subtract(1,"months"),t]}()},{text:"最近一年",value:function(){var t=new Date,a=new Date;return a.setFullYear(a.getFullYear()-1),[e.$moment().subtract(1,"years"),t]}()}],datePickerAbleA:!0,datePickerAbleB:!0,tagA:{all:{icon:{width:"20%",bgcolor:"#67C23A"},content:{title:{title:"总客流量"},value:{value:"#E6A23C"}}},avgDay:{icon:{width:"20%",bgcolor:"#e89a3c"},content:{title:{title:"集团占比"},value:{value:""}}},avgWeek:{icon:{width:"20%",bgcolor:"#a9d134"},content:{title:{title:"当月占比"},value:{value:""}}},avgMonth:{icon:{width:"20%",bgcolor:"#d8bd14"},content:{title:{title:"集客力"},value:{value:""}}},week:{icon:{width:"20%",bgcolor:"#33bcb7"},content:{title:{title:"日均客流量"},value:{value:""}}},upDown:{icon:{width:"20%",bgcolor:"#49aa19"},content:{title:{title:"游逛深度"},value:{value:""}}},textWidth:""},tagB:{all:{icon:{width:"20%",bgcolor:"#67C23A"},content:{title:{title:"总客流量"},value:{value:"#E6A23C"}}},avgDay:{icon:{width:"20%",bgcolor:"#e89a3c"},content:{title:{title:"集团占比"},value:{value:""}}},avgWeek:{icon:{width:"20%",bgcolor:"#a9d134"},content:{title:{title:"当月占比"},value:{value:""}}},avgMonth:{icon:{width:"20%",bgcolor:"#d8bd14"},content:{title:{title:"集客力"},value:{value:""}}},week:{icon:{width:"20%",bgcolor:"#33bcb7"},content:{title:{title:"日均客流量"},value:{value:""}}},upDown:{icon:{width:"20%",bgcolor:"#49aa19"},content:{title:{title:"游逛深度"},value:{value:""}}},textWidth:""},chart1:{},chartData1:[],interval:"一月",screenWidth:document.body.clientWidth}},components:{crumbs:O["a"],areaSelect:j["a"],market:k["a"],smallTag:V["a"],ExportExcel:Y["a"]},methods:{exportData:function(){var e=this;y.a.all([y()("https://mock.mengxuegu.com/mock/6076fee5990ff82a18f95b5f/item/getFlowComparison?lg=".concat(this.timeCalc(this.timeRangeA[0],this.timeRangeA[1]).length)),y()("https://mock.mengxuegu.com/mock/6076fee5990ff82a18f95b5f/item/getFlowComparison?lg=".concat(this.timeCalc(this.timeRangeB[0],this.timeRangeB[1]).length))]).then(y.a.spread((function(){e.dataAll=[];for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];var o=a[0].data.list;"全部"!=e.areaNameA&&(o=o.filter((function(t){return t.area==e.areaNameA})));for(var i=e.timeCalc(e.timeRangeA[0],e.timeRangeA[1]),r=[0,0,0,0],l=0;l<i.length;l++)r[0]+=o.flow[l],r[1]+=o.getPower[l],r[2]+=o.rate[l],r[3]+=o.deep[l];for(var c=[0,0,0,0],u=0;u<i.length;u++)6!=e.$moment(i[u]).isoWeekday()&&7!=e.$moment(i[u]).isoWeekday()||(c[0]+=o.flow[u],c[1]+=o.getPower[u],c[2]+=o.rate[u],c[3]+=o.deep[u]);e.dataAll.push({date:"全部",flow:r[0],getPower:r[1],rate:r[2],deep:r[3],marketName:e.marketNameA,areaName:o.area}),e.dataAll.push({date:"周末",flow:c[0],getPower:c[1],rate:c[2],deep:c[3],marketName:e.marketNameA,areaName:o.area}),e.dataAll.push({date:"月平均",flow:(r[0]/30).toFixed(2),getPower:(r[1]/30).toFixed(2),rate:(r[2]/30).toFixed(2),deep:(r[3]/30).toFixed(2),marketName:e.marketNameA,areaName:o.area}),e.dataAll.push({date:"周平均",flow:(r[0]/7).toFixed(2),getPower:(r[1]/7).toFixed(2),rate:(r[2]/7).toFixed(2),deep:(r[3]/7).toFixed(2),marketName:e.marketNameA,areaName:o.area}),e.dataAll.push({date:"天平均",flow:(r[0]/i.length).toFixed(2),getPower:(r[1]/i.length).toFixed(2),rate:(r[2]/i.length).toFixed(2),deep:(r[3]/i.length).toFixed(2),marketName:e.marketNameA,areaName:o.area});for(var d=0;d<i.length;d++)e.dataAll.push({date:i[d],flow:o.flow[d],getPower:o.getPower[d],rate:o.rate[d],deep:o.deep[d],marketName:e.marketNameA,areaName:o.area});var s=a[1].data.list;"全部"!=e.areaNameB&&(s=s.filter((function(t){return t.area==e.areaNameB})));var m=e.timeCalc(e.timeRangeB[0],e.timeRangeB[1]);r=[0,0,0,0];for(var h=0;h<m.length;h++)r[0]+=s.flow[h],r[1]+=s.getPower[h],r[2]+=s.rate[h],r[3]+=s.deep[h];c=[0,0,0,0];for(var g=0;g<m.length;g++)6!=e.$moment(m[g]).isoWeekday()&&7!=e.$moment(m[g]).isoWeekday()||(c[0]+=s.flow[g],c[1]+=s.getPower[g],c[2]+=s.rate[g],c[3]+=s.deep[g]);e.dataAll.push({date:"全部",flow:r[0],getPower:r[1],rate:r[2],deep:r[3],marketName:e.marketNameB,areaName:s.area}),e.dataAll.push({date:"周末",flow:c[0],getPower:c[1],rate:c[2],deep:c[3],marketName:e.marketNameB,areaName:s.area}),e.dataAll.push({date:"月平均",flow:(r[0]/30).toFixed(2),getPower:(r[1]/30).toFixed(2),rate:(r[2]/30).toFixed(2),deep:(r[3]/30).toFixed(2),marketName:e.marketNameB,areaName:s.area}),e.dataAll.push({date:"周平均",flow:(r[0]/7).toFixed(2),getPower:(r[1]/7).toFixed(2),rate:(r[2]/7).toFixed(2),deep:(r[3]/7).toFixed(2),marketName:e.marketNameB,areaName:s.area}),e.dataAll.push({date:"天平均",flow:(r[0]/m.length).toFixed(2),getPower:(r[1]/m.length).toFixed(2),rate:(r[2]/m.length).toFixed(2),deep:(r[3]/m.length).toFixed(2),marketName:e.marketNameB,areaName:s.area});for(var f=0;f<m.length;f++)e.dataAll.push({date:m[f],flow:s.flow[f],getPower:s.getPower[f],rate:s.rate[f],deep:s.deep[f],marketName:e.marketNameB,areaName:s.area})})))},marketGetA:function(e){this.marketNameA=e},areaGetA:function(e){this.areaNameA=e},timeGetA:function(e){console.log(e),this.timeA=e,this.datePickerAbleA="自定义时间"!=e},timeIntval:function(e,t){var a=[],n=this.$moment;e=n(e).format("YYYY-MM-DD"),t=n(t).format("YYYY-MM-DD");while(n(e).isBefore(t))a.push(n(e).format("YYYY-MM-DD")),e=n(e).add(1,"days").format("YYYY-MM-DD");return a.push(n(t).format("YYYY-MM-DD")),a},timeCalc:function(e,t){var a=[],n=this.$moment;e=n(e).format("YYYY-MM-DD"),t=n(t).format("YYYY-MM-DD");while(n(e).isBefore(t))a.push(n(e).format("YYYY-MM-DD")),e="一天"==this.interval?n(e).add(1,"days").format("YYYY-MM-DD"):"一周"==this.interval?n(e).add(7,"days").format("YYYY-MM-DD"):n(e).add(1,"months").format("YYYY-MM-DD");return a.push(n(t).format("YYYY-MM-DD")),a},marketGetB:function(e){this.marketNameB=e},areaGetB:function(e){this.areaNameB=e},timeGetB:function(e){console.log(e),this.timeB=e,this.datePickerAbleB="自定义时间"!=e},onQuery:function(){this.tagChangeA(),this.tagChangeB(),this.dataChangeA(),this.dataChangeB()},reSet:function(){this.marketNameA="万达",this.marketNameB="万达",this.areaNameA="全部",this.areaNameB="全部",this.timeA="近1年",this.timeB="近1年",this.indexName="客流量"},tagChangeA:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&this.marketNameA==this.marketNameB&&this.areaNameA==this.areaNameB&&this.$moment(this.timeRangeA[0]).format("YYYY-MM-DD")==this.$moment(this.timeRangeB[0]).format("YYYY-MM-DD")&&this.$moment(this.timeRangeA[1]).format("YYYY-MM-DD")==this.$moment(this.timeRangeB[1]).format("YYYY-MM-DD")?(this.tagA.all.content.value.value=this.tagB.all.content.value.value,this.tagA.avgDay.content.value.value=this.tagB.avgDay.content.value.value,this.tagA.avgWeek.content.value.value=this.tagB.avgWeek.content.value.value,this.tagA.avgMonth.content.value.value=this.tagB.avgMonth.content.value.value,this.tagA.week.content.value.value=this.tagB.week.content.value.value,this.tagA.upDown.content.value.value="0%",this.tagA.all.content.title.title="总"+this.indexName,this.tagA.avgDay.content.title.title="日平均"+this.indexName,this.tagA.avgWeek.content.title.title="周平均"+this.indexName,this.tagA.avgMonth.content.title.title="月平均"+this.indexName,this.tagA.week.content.title.title="周末"+this.indexName,this.tagA.upDown.content.title.title=this.indexName+"涨跌比",this.tagB.upDown.content.value.value="0%"):(y()("https://mock.mengxuegu.com/mock/6076fee5990ff82a18f95b5f/item/getFlowComparison?lg=".concat(this.timeIntval(this.timeRangeA[0],this.timeRangeA[1]).length)).then((function(t){var a=e.timeIntval(e.timeRangeA[0],e.timeRangeA[1]),n=a.filter((function(t){return 6==e.$moment(t).isoWeekday()||7==e.$moment(t).isoWeekday()}));console.log(n);var o=t.data.list,i="";"客流量"==e.indexName?i="flow":"集客力"==e.indexName?i="getPower":"提袋率"==e.indexName?i="rate":"游逛深度"==e.indexName&&(i="deep");for(var r=0,l=0;l<a.length;l++)6!=e.$moment(a[l]).isoWeekday()&&7!=e.$moment(a[l]).isoWeekday()||(r+=o[i][l]);var c=o[i].reduce((function(e,t){return e+t}),0);e.tagA.all.content.value.value=c,e.tagA.avgDay.content.value.value=(c/a.length).toFixed(0),e.tagA.avgWeek.content.value.value=(c/7).toFixed(0),e.tagA.avgMonth.content.value.value=(c/30).toFixed(0),e.tagA.week.content.value.value=r,e.tagA.all.content.title.title="总"+e.indexName,e.tagA.avgDay.content.title.title="日平均"+e.indexName,e.tagA.avgWeek.content.title.title="周平均"+e.indexName,e.tagA.avgMonth.content.title.title="月平均"+e.indexName,e.tagA.week.content.title.title="周末"+e.indexName,e.tagA.upDown.content.title.title=e.indexName+"涨跌比"})),this.tagA.upDown.content.value.value=((this.tagA.all.content.value.value-this.tagB.all.content.value.value)/this.tagB.all.content.value.value*100).toFixed(2)+"%",this.tagB.upDown.content.value.value=((this.tagB.all.content.value.value-this.tagA.all.content.value.value)/this.tagA.all.content.value.value*100).toFixed(2)+"%")},tagChangeB:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&this.marketNameA==this.marketNameB&&this.areaNameA==this.areaNameB&&this.$moment(this.timeRangeA[0]).format("YYYY-MM-DD")==this.$moment(this.timeRangeB[0]).format("YYYY-MM-DD")&&this.$moment(this.timeRangeA[1]).format("YYYY-MM-DD")==this.$moment(this.timeRangeB[1]).format("YYYY-MM-DD")?(this.tagB.all.content.value.value=this.tagA.all.content.value.value,this.tagB.avgDay.content.value.value=this.tagA.avgDay.content.value.value,this.tagB.avgWeek.content.value.value=this.tagA.avgWeek.content.value.value,this.tagB.avgMonth.content.value.value=this.tagA.avgMonth.content.value.value,this.tagB.week.content.value.value=this.tagA.week.content.value.value,this.tagB.upDown.content.value.value="0%",this.tagB.all.content.title.title="总"+this.indexName,this.tagB.avgDay.content.title.title="日平均"+this.indexName,this.tagB.avgWeek.content.title.title="周平均"+this.indexName,this.tagB.avgMonth.content.title.title="月平均"+this.indexName,this.tagB.week.content.title.title="周末"+this.indexName,this.tagB.upDown.content.title.title=this.indexName+"涨跌比",this.tagA.upDown.content.value.value="0%"):(y()("https://mock.mengxuegu.com/mock/6076fee5990ff82a18f95b5f/item/getFlowComparison?lg=".concat(this.timeIntval(this.timeRangeB[0],this.timeRangeB[1]).length)).then((function(t){var a=e.timeIntval(e.timeRangeB[0],e.timeRangeB[1]),n=a.filter((function(t){return 6==e.$moment(t).isoWeekday()||7==e.$moment(t).isoWeekday()}));console.log(n);var o=t.data.list,i="";"客流量"==e.indexName?i="flow":"集客力"==e.indexName?i="getPower":"提袋率"==e.indexName?i="rate":"游逛深度"==e.indexName&&(i="deep");for(var r=0,l=0;l<a.length;l++)6!=e.$moment(a[l]).isoWeekday()&&7!=e.$moment(a[l]).isoWeekday()||(console.log(l+":"+o[i][l]),console.log(r),r+=o[i][l]);console.log(r);var c=o[i].reduce((function(e,t){return e+t}),0);e.tagB.all.content.value.value=c,e.tagB.avgDay.content.value.value=(c/a.length).toFixed(0),e.tagB.avgWeek.content.value.value=(c/7).toFixed(0),e.tagB.avgMonth.content.value.value=(c/30).toFixed(0),e.tagB.week.content.value.value=r,e.tagB.all.content.title.title="总"+e.indexName,e.tagB.avgDay.content.title.title="日平均"+e.indexName,e.tagB.avgWeek.content.title.title="周平均"+e.indexName,e.tagB.avgMonth.content.title.title="月平均"+e.indexName,e.tagB.week.content.title.title="周末"+e.indexName,e.tagB.upDown.content.title.title=e.indexName+"涨跌比"})),this.tagA.upDown.content.value.value=((this.tagA.all.content.value.value-this.tagB.all.content.value.value)/this.tagB.all.content.value.value*100).toFixed(2)+"%",this.tagB.upDown.content.value.value=((this.tagB.all.content.value.value-this.tagA.all.content.value.value)/this.tagA.all.content.value.value*100).toFixed(2)+"%")},initChart1:function(e,t){var a=D["b"](e),n={title:{show:!0,x:"center",y:"top",textStyle:{fontSize:"14",fontWeight:"bolder"}},tooltip:{position:"top",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},legend:{data:["参考区域","对比区域"],top:"top",left:"center"},toolbox:{show:!0,feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},dataZoom:[{type:"slider",xAxisIndex:[0]},{type:"slider",yAxisIndex:[0]},{type:"inside",xAxisIndex:[0]},{type:"inside",yAxisIndex:[0]}],calculable:!0,xAxis:[{type:"category",data:this.timeCalc(this.timeRangeA[0],this.timeRangeA[1])}],yAxis:[{type:"value"}],series:t};return console.log(n.legend.data),console.log(n.series),this.exportData(),a.setOption(n),a},dataChangeA:function(){var e=this;y()("https://mock.mengxuegu.com/mock/6076fee5990ff82a18f95b5f/item/getFlowComparison?lg=".concat(this.timeCalc(this.timeRangeA[0],this.timeRangeA[1]).length)).then((function(t){var a="";"客流量"==e.indexName?a="flow":"集客力"==e.indexName?a="getPower":"提袋率"==e.indexName?a="rate":"游逛深度"==e.indexName&&(a="deep"),e.chart1.clear(),e.chartData1[0]={name:"参考区域",type:"bar",itemStyle:{color:"#F56C6C"},data:t.data.list[a],markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}],symbol:"none",label:{position:"start"}}},e.chart1=e.initChart1(e.$refs.myEchart1,e.chartData1)}))},dataChangeB:function(){var e=this;y()("https://mock.mengxuegu.com/mock/6076fee5990ff82a18f95b5f/item/getFlowComparison?lg=".concat(this.timeCalc(this.timeRangeB[0],this.timeRangeB[1]).length)).then((function(t){var a="";"客流量"==e.indexName?a="flow":"集客力"==e.indexName?a="getPower":"提袋率"==e.indexName?a="rate":"游逛深度"==e.indexName&&(a="deep"),e.chart1.clear(),e.chartData1[1]={name:"对比区域",type:"bar",itemStyle:{color:"#49aa19"},data:t.data.list[a],markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}],symbol:"none",label:{position:"start"}}},e.chart1=e.initChart1(e.$refs.myEchart1,e.chartData1)}))}},mounted:function(){var e=this,t=this;window.onresize=function(){return function(){window.screenWidth=document.body.clientWidth,t.screenWidth=window.screenWidth}()},this.timeRangeA=[this.$moment().subtract(1,"years"),this.$moment()],this.timeRangeB=[this.$moment().subtract(1,"years"),this.$moment()],this.exportData(),this.marketNameB="福满家",y()("https://mock.mengxuegu.com/mock/6076fee5990ff82a18f95b5f/item/getFlowComparison?lg=".concat(this.timeIntval(this.timeRangeA[0],this.timeRangeA[1]).length)).then((function(t){console.log(t.data.list);var a=e.timeIntval(e.timeRangeA[0],e.timeRangeA[1]),n=a.filter((function(t){return 6==e.$moment(t).isoWeekday()||7==e.$moment(t).isoWeekday()}));console.log(n);var o=t.data.list,i="";"客流量"==e.indexName?i="flow":"集客力"==e.indexName?i="getPower":"提袋率"==e.indexName?i="rate":"游逛深度"==e.indexName&&(i="deep");for(var r=0,l=0;l<a.length;l++)6!=e.$moment(a[l]).isoWeekday()&&7!=e.$moment(a[l]).isoWeekday()||(r+=o[i][l]);var c=o[i].reduce((function(e,t){return e+t}),0);e.tagA.all.content.value.value=c,e.tagA.avgDay.content.value.value=(c/a.length).toFixed(0),e.tagA.avgWeek.content.value.value=(c/7).toFixed(0),e.tagA.avgMonth.content.value.value=(c/30).toFixed(0),e.tagA.week.content.value.value=r,e.tagA.upDown.content.value.value="0%",e.tagA.all.content.title.title="总"+e.indexName,e.tagA.avgDay.content.title.title="日平均"+e.indexName,e.tagA.avgWeek.content.title.title="周平均"+e.indexName,e.tagA.avgMonth.content.title.title="月平均"+e.indexName,e.tagA.week.content.title.title="周末"+e.indexName,e.tagA.upDown.content.title.title=e.indexName+"涨跌比",console.log(e.tagA),e.tagB.all.content.value.value=c,e.tagB.avgDay.content.value.value=(c/a.length).toFixed(0),e.tagB.avgWeek.content.value.value=(c/7).toFixed(0),e.tagB.avgMonth.content.value.value=(c/30).toFixed(0),e.tagB.week.content.value.value=r,e.tagB.upDown.content.value.value="0%",e.tagB.all.content.title.title="总"+e.indexName,e.tagB.avgDay.content.title.title="日平均"+e.indexName,e.tagB.avgWeek.content.title.title="周平均"+e.indexName,e.tagB.avgMonth.content.title.title="月平均"+e.indexName,e.tagB.week.content.title.title="周末"+e.indexName,e.tagB.upDown.content.title.title=e.indexName+"涨跌比"})),y()("https://mock.mengxuegu.com/mock/6076fee5990ff82a18f95b5f/item/getFlowComparison?lg=".concat(this.timeCalc(this.timeRangeA[0],this.timeRangeA[1]).length)).then((function(t){var a="";"客流量"==e.indexName?a="flow":"集客力"==e.indexName?a="getPower":"提袋率"==e.indexName?a="rate":"游逛深度"==e.indexName&&(a="deep"),e.chartData1.push({name:"参考区域",type:"bar",itemStyle:{color:"#F56C6C"},data:t.data.list[a],markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}],symbol:"none",label:{position:"start"}}}),e.chart1=e.initChart1(e.$refs.myEchart1,e.chartData1)})),y()("https://mock.mengxuegu.com/mock/6076fee5990ff82a18f95b5f/item/getFlowComparison?lg=".concat(this.timeCalc(this.timeRangeB[0],this.timeRangeB[1]).length)).then((function(t){var a="";"客流量"==e.indexName?a="flow":"集客力"==e.indexName?a="getPower":"提袋率"==e.indexName?a="rate":"游逛深度"==e.indexName&&(a="deep"),e.chartData1.push({name:"对比区域",type:"bar",itemStyle:{color:"#49aa19"},data:t.data.list[a],markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}],symbol:"none",label:{position:"start"}}}),e.chart1=e.initChart1(e.$refs.myEchart1,e.chartData1)}))},computed:{tag:function(){return this.tagSet}},watch:{timeA:function(e){"近7日"===e&&(this.timeRangeA=[this.$moment().subtract(7,"days"),this.$moment()]),"近30日"===e&&(this.timeRangeA=[this.$moment().subtract(1,"months"),this.$moment()]),"近1年"===e&&(this.timeRangeA=[this.$moment().subtract(1,"year"),this.$moment()]),this.datePickerAbleA="自定义时间"!=e,this.tagChangeA()},timeB:function(e){"近7日"===e&&(this.timeRangeB=[this.$moment().subtract(7,"days"),this.$moment()]),"近30日"===e&&(this.timeRangeB=[this.$moment().subtract(1,"months"),this.$moment()]),"近1年"===e&&(this.timeRangeB=[this.$moment().subtract(1,"year"),this.$moment()]),this.datePickerAbleB="自定义时间"!=e,this.tagChangeB()},marketNameB:function(){this.tagChangeB()},areaNameB:function(){this.tagChangeB()},marketNameA:function(){this.tagChangeA()},areaNameA:function(){this.tagChangeA()},indexName:function(){this.tagChangeA(!1),this.tagChangeB(!1),this.dataChangeA(),this.dataChangeB()},interval:function(){this.dataChangeA(),this.dataChangeB()},screenWidth:function(e){if(!this.timer){this.screenWidth=e,this.timer=!0;var t=this;setTimeout((function(){t.timer=!1,t.chart1.resize()}),400)}}}};a("2fd3");C.render=w,C.__scopeId="data-v-18062abd";t["default"]=C},af7e:function(e,t,a){"use strict";var n=a("7a23"),o=Object(n["withScopeId"])("data-v-a87dd106");Object(n["pushScopeId"])("data-v-a87dd106");var i={class:"grid-cont-right"};Object(n["popScopeId"])();var r=o((function(e,t,a,r,l,c){var u=Object(n["resolveComponent"])("el-card");return Object(n["openBlock"])(),Object(n["createBlock"])("div",null,[Object(n["createVNode"])(u,{shadow:"hover","body-style":{padding:"0px"}},{default:o((function(){return[Object(n["createVNode"])("div",{style:c.content},[Object(n["createVNode"])("i",{class:e.el-e.icon-e.user-e.solid,style:c.gridIcon},null,6),Object(n["createVNode"])("div",i,[Object(n["createVNode"])("div",{style:c.gridVal},Object(n["toDisplayString"])(a.options&&a.options.content&&a.options.content.value&&a.options.content.value.value?a.options.content.value.value:"未传值"),5),Object(n["createVNode"])("div",null,Object(n["toDisplayString"])(a.options&&a.options.content&&a.options.content.title&&a.options.content.title.title?a.options.content.title.title:"未传值"),1),Object(n["createVNode"])("div",null,Object(n["toDisplayString"])(),1)])],4)]})),_:1})])})),l=(a("99af"),{data:function(){return{tag:{body:{height:""},content:{value:{color:"",value:"",size:""},title:{color:"",title:""},compare:{value:""}},icon:{color:"",name:"",width:"",bgcolor:"",iconSize:""}}}},props:["options"],mounted:function(){},computed:{content:function(){var e=this.options&&this.options.body;return"display: flex;\n              align-items: center;\n              height: ".concat(e&&this.options.body.height?this.options.body.height:"150px",";\n        ")},gridIcon:function(){var e=this.options&&this.options.icon,t=this.options&&this.options.body;return"\n            font-size:".concat(e&&this.options.icon.iconSize?this.options.icon.iconSize:"70px"," ;\n            width:").concat(e&&this.options.icon.width?this.options.icon.width:"20%"," ;\n            height:").concat(t&&this.options.body.height?this.options.body.height:"150px",";\n            text-align: center;\n            line-height:").concat(t&&this.options.body.height?this.options.body.height:"150px",";\n            color:").concat(e&&this.options.icon.color?this.options.icon.color:"#fff"," ;\n            background:").concat(e&&this.options.icon.bgcolor?this.options.icon.bgcolor:"rgb(45, 140, 240)"," ;\n      ")},gridVal:function(){var e=this.options&&this.options.value;return"\n            font-size:".concat(e&&this.options.value.size?this.options.value.size:"40px"," ;\n            font-weight: bold;\n            color:rgb(45, 140, 240);\n      ")}}});a("cbc8");l.render=r,l.__scopeId="data-v-a87dd106";t["a"]=l},b680:function(e,t,a){"use strict";var n=a("23e7"),o=a("a691"),i=a("408a"),r=a("1148"),l=a("d039"),c=1..toFixed,u=Math.floor,d=function(e,t,a){return 0===t?a:t%2===1?d(e,t-1,a*e):d(e*e,t/2,a)},s=function(e){var t=0,a=e;while(a>=4096)t+=12,a/=4096;while(a>=2)t+=1,a/=2;return t},m=function(e,t,a){var n=-1,o=a;while(++n<6)o+=t*e[n],e[n]=o%1e7,o=u(o/1e7)},h=function(e,t){var a=6,n=0;while(--a>=0)n+=e[a],e[a]=u(n/t),n=n%t*1e7},g=function(e){var t=6,a="";while(--t>=0)if(""!==a||0===t||0!==e[t]){var n=String(e[t]);a=""===a?n:a+r.call("0",7-n.length)+n}return a},f=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!l((function(){c.call({})}));n({target:"Number",proto:!0,forced:f},{toFixed:function(e){var t,a,n,l,c=i(this),u=o(e),f=[0,0,0,0,0,0],v="",p="0";if(u<0||u>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(v="-",c=-c),c>1e-21)if(t=s(c*d(2,69,1))-69,a=t<0?c*d(2,-t,1):c/d(2,t,1),a*=4503599627370496,t=52-t,t>0){m(f,0,a),n=u;while(n>=7)m(f,1e7,0),n-=7;m(f,d(10,n,1),0),n=t-1;while(n>=23)h(f,1<<23),n-=23;h(f,1<<n),m(f,1,1),h(f,2),p=g(f)}else m(f,0,a),m(f,1<<-t,0),p=g(f)+r.call("0",u);return u>0?(l=p.length,p=v+(l<=u?"0."+r.call("0",u-l)+p:p.slice(0,l-u)+"."+p.slice(l-u))):p=v+p,p}})},b899:function(e,t,a){},cbc8:function(e,t,a){"use strict";a("b899")},cf77:function(e,t,a){"use strict";var n=a("7a23"),o=Object(n["withScopeId"])("data-v-59c12c6d");Object(n["pushScopeId"])("data-v-59c12c6d");var i=Object(n["createVNode"])("span",{id:"text"},"区域选择:",-1);Object(n["popScopeId"])();var r=o((function(e,t,a,r,l,c){var u=Object(n["resolveComponent"])("el-option"),d=Object(n["resolveComponent"])("el-select");return Object(n["openBlock"])(),Object(n["createBlock"])("div",null,[i,Object(n["createVNode"])(d,{modelValue:l.areaValue,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.areaValue=e}),placeholder:"请选择",style:c.widthSet,onChange:c.submitArea,filterable:""},{default:o((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(l.areaList,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","style","onChange"])])})),l=a("bc3a"),c=a.n(l),u={props:["areaSet"],data:function(){return{areaValue:"全部",areaList:[],textWidth:""}},components:{},mounted:function(){var e=this;c()("https://mock.mengxuegu.com/mock/6076fee5990ff82a18f95b5f/item/getArea").then((function(t){e.areaList=t.data.list})),this.textWidth=document.getElementById("text").offsetWidth},methods:{submitArea:function(e){this.$emit("areaGet",e)}},computed:{widthSet:function(){return"width:calc(90% - ".concat(this.textWidth,"px);min-width:0px;")}},watch:{areaSet:function(e){this.areaValue=e}}};u.render=r,u.__scopeId="data-v-59c12c6d";t["a"]=u},d2c1:function(e,t,a){}}]);
//# sourceMappingURL=chunk-3d9b0fd6.171b33ee.js.map